## 数据类型

### 字符串类型

在数据库的所有类型中，字符串类型是使用最频繁的，数据库中字符串类型下有非常多种类的类型，如下表所示：

|     类型     |       大小        |              用途               |
| :----------: | :---------------: | :-----------------------------: |
|    `CHAR`    |    0-255 字节     |           定长字符串            |
|  `VARCHAR`   |   0-65535 字节    |           变长字符串            |
|  `TINYBLOB`  |    0-255 字节     | 不超过 255 个字符的二进制字符串 |
|  `TINYTEXT`  |    0-255 字节     |          短文本字符串           |
|    `BLOB`    |   0-65535 字节    |     二进制形式的长文本数据      |
|    `TEXT`    |   0-65535 字节    |           长文本数据            |
| `MEDIUMBLOB` |  0-16777215 字节  |  二进制形式的中等长度文本数据   |
| `MEDIUMTEXT` |  0-16777215 字节  |        中等长度文本数据         |
|  `LONGBLOB`  | 0-4294967295 字节 |    二进制形式的极大文本数据     |
|  `LONGTEXT`  | 0-4294967295 字节 |          极大文本数据           |

字符串通常来讲分为二进制（`mp3`，照片和视频都属于二进制类型，我们可以作为二进制存放到`mysql`中）和非二进制类型（文本内容等等）

`mysql`可以存放二进制文件，但是我们一般不存放二进制文件，这些图片视频二进制数据会使我们的数据表体积变得很多，造成读取时间变慢，所以说二进制文件一般不使用`mysql`进行存储的，这些视频照片一般存储在第三方的`oss`中，将这些较大的静态数据放到云上，加载速度会更快

> `char`和`varchar`字符串类型是我们用的比较多的字符串类型
>
> - `char` 类型是定长类型，比如定义了 20 长度的`char`类型，只存一个字符也占用 20 个长度，`char` 好处是处理速度快，缺点是空间占用大（空间换取速度，检索这一类字符的时候速度非常快），把手机号、邮箱、密码等长度相对固定的设置为 `char` 类型是不错的选择，或者牵扯到排序的字符串数据也可以设置为`char`类型
>
> - `varchar `类型与 `char` 相反，点用空间受内容影响，可以把文章标题、介绍等设置为` varchar `类型更合适

#### 字符集

字符集决定了我们在字段中能存储那类的字符，不符合字符集的文字可能会在存储的时候出现乱码

查看系统都支持哪些字符集：`show CHARACTER set;`

当使用到字符串，就一定会使用到字符集，在现实当中的字符集就是字典，字符集的种类是非常多的，有些字符集是比较全面的，包含了大多数语言，如`UTF8`字符集，在创建数据库的时候可以进行设置字符集，在建表的时候也可以设置字符集，表中的字段也有字符集，最终的数据是存储在字段中的，所以字符集以字段的为准

> 如果表没有设置字符集，那么表的字符集就会继承于数据库的
>
> 如果字段没有设置字符集，就会继承于表的字符集
>
> 但是在后续修改上层的字符集，不会使下层已有内容的字符集发生改变，但是对于新建的内容，字符集就会继承修改后的新字符集

#### 校对规则

数据库的校对规则有很多， 比如对于字符串的校对规则有：区分大小写

在默认的情况下，通过字符串进行比较查询（甚至排序）是不区分大小写的，如果我们想要让其进行区分大小写，我们就需要更改校对规则进行实现，一般校对规则是跟在字符集后面的，如`utf8_bin`，其中`utf8`是字符集；`bin`是区分字符串大小写的校对规则

总之：字符串校对规则是影响字符串比较和排序的一种算法

#### 字符串函数

字符串函数可以方便我们快速的解决一些字符串拆分和合并相关的一些问题

常见的字符串函数：

|           函数           |                             描述                             |
| :----------------------: | :----------------------------------------------------------: |
|    `left(字段名, i)`     |      从给定字段内容的从左边进行取i个字符串（包括第i个）      |
|    `right(字段名, i)`    |      从给定字段内容的从右边进行取i个字符串（包括第i个）      |
|   `mid(字段名, i, n)`    | 从给定字段内容的任何位置的第i个位置取n个字符串，如果没有输入n，表示从第i个位置进行取后面所有字符串 |
|  `substring(字段名, i)`  | 对于表中的给定字段名，从该字段内容的第i个开始取（包括第i个），一直取到最后 |
|  `char_length(字段名)`   |                  获取给定字段中字符串的长度                  |
| `concat("前缀", 字段名)` |         给选定的字符串的所有内容都连接一个字符串前缀         |

小案例：如果字段内容的长度大于8个，我们在8位之后使用`...`进行连接：

```mysql
select if (char_length(cname)>8,concat(left(cname,8),'...'),cname) as cname from class;
```

> 如果长度大于8位，8位后面使用`...`进行连接；如果长短小于8位，不做任何处理

***

### 数值类型

数值类型就是用于存储我们的数字的，常见的数值类型有以下的几个类型：

|    数据类型    |       范围（有符号）（默认情况）       |      范围（无符号）       |
| :------------: | :------------------------------------: | :-----------------------: |
|  `tinyint(n)`  |        1 个字节的范围(-128~127)        |         (0，255)          |
| `smallint(n)`  |      2 个字节的范围(-32768~32767)      |        (0，65535)         |
| `mediumint(n)` |    3 个字节的范围(-8388608~8388607)    |       (0，16777215)       |
|    `int(n)`    | 4 个字节的范围(-2147483648~2147483647) |      (0，4294967295)      |
|  `bigint(n)`   |      8 个字节的范围(+-9.22*10^18)      | (0，18446744073709551615) |

> 其中n是设置我们的显示位数
>
> 越往下范围越大，所占用的磁盘空间就越大，实际中选则合适大小的即可，如果选则的类型占用磁盘过大，数据在检索的时候时间就越长，效率就低

```mysql
-- 为class数据表中添加status字段，字段是数值类型的，具体为TINYINT
alter table class add status TINYINT;

-- 有时候我们不想让数值类型有符号，让数值类型只能存储正数的类型
alter table class add status TINYINT UNSIGNED;
```

#### n和`ZEROFILL`

数值类型后面跟着的(n)表示设置我们数值的显示位数，并不是说只能输入n个数字字符

```mysql
alter table class add state int(5) ZEROFILL;
```

`int(5)`只控制显示长度，如果添加了前导零填充这个关键字`ZEROFILL`后，如果长度不够5位，会在数值前面进行补0，使其长度控制在5位，但是前导零在数据库图形化界面中有时难以显示，在命令行终端中可以正常显示